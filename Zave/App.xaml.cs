///////////////////////////////////////////////////////////
//  App.cs
//  Implementation of the Class App
//  Generated by Enterprise Architect
//  Created on:      28-Mar-2016 9:30:09 AM
//  Original author: Moshe
///////////////////////////////////////////////////////////

using System;
using System.Collections.Generic;
using System.Text;
using System.IO;
using System.Windows;
using ZaveViewModel.ZDFEntryViewModel;

namespace Zave
{
    /// <summary>
    /// Interaction logic for App.xaml
    /// </summary>
    public partial class App : Application
    {

        /// <summary>
        /// Prototype hardcoded ZDF for early version
        /// </summary>
        public ZaveModel.ZDFEntry.ZDFEntry Entry { get; set; }
        ZaveModel.ZDF.ZDFSingleton activeZDF;
        

        /// <summary>
        /// Runs Init() Method
        /// </summary>
        public App()
        {
            //Init();
            //MainWindow app = new MainWindow();
            //ZDFEntryViewModel viewModel = new ZDFEntryViewModel();
            //app.DataContext = viewModel;
            //app.Show();


        }

        ~App()
        {

        }

        private void Application_Startup(object sender, StartupEventArgs e)
        {
            MainWindow wnd = new Zave.MainWindow();
            activeZDF = ZaveModel.ZDF.ZDFSingleton.Instance;

            activeZDF.PropertyChanged += activeZDF_PropertyChanged;
            wnd.Title = "Zave";
            wnd.Show();
        }

        void activeZDF_PropertyChanged(object sender, System.ComponentModel.PropertyChangedEventArgs e)
        {
            int index = activeZDF.EntryList.Count - 1;
            Entry = activeZDF.EntryList[index] as ZaveModel.ZDFEntry.ZDFEntry;
            System.Windows.Forms.MessageBox.Show(Entry.Source.SelectionText);
        }

        /// <summary>
        /// Runs Debug code. Right now, creates a ZDF to work with.
        /// </summary>
        //public void Init()
        //{

        //    activeZDFEntry = new ZaveViewModel.ZDFEntryViewModel.ZDFEntryViewModel();
        //}

    }//end App

}//end namespace ZaveProject